"use strict";
/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdatecesiumjs_webpack_example"]("app",{

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Ion.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/createWorldTerrain.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/widgets/Source/Viewer/Viewer.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Scene/OpenStreetMapImageryProvider.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Scene/Cesium3DTileStyle.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Scene/createOsmBuildings.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Scene/DirectionalLight.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Cartesian3.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Color.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Cartographic.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/sampleTerrainMostDetailed.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/JulianDate.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/DataSources/SampledPositionProperty.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/DataSources/VelocityOrientationProperty.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Matrix3.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Quaternion.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Matrix4.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/DataSources/Property.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/defined.js\");\n/* harmony import */ var cesium__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! cesium */ \"./node_modules/@cesium/engine/Source/Core/Transforms.js\");\n/* harmony import */ var cesium_Build_Cesium_Widgets_widgets_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! cesium/Build/Cesium/Widgets/widgets.css */ \"./node_modules/cesium/Build/Cesium/Widgets/widgets.css\");\n/* harmony import */ var _src_css_main_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../src/css/main.css */ \"./src/css/main.css\");\n/* harmony import */ var autocompleter__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! autocompleter */ \"./node_modules/autocompleter/autocomplete.js\");\n/* harmony import */ var autocompleter__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(autocompleter__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _turf_length__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @turf/length */ \"./node_modules/@turf/length/dist/es/index.js\");\n/* harmony import */ var _turf_helpers__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @turf/helpers */ \"./node_modules/@turf/helpers/dist/es/index.js\");\n\n\n\n\n\n\n\n// Your access token can be found at: https://cesium.com/ion/tokens.\n// This is the default access token\ncesium__WEBPACK_IMPORTED_MODULE_5__[\"default\"].defaultAccessToken =\n  \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJiZjI2MjVjZi1jZjNiLTQ4NGItODVjMi0zYzJhYjBmNjQ3MDMiLCJpZCI6MTA3MDg0LCJpYXQiOjE2NjIzOTMxMjZ9.qOi-2Ty0b5W-y4vTza2QjOH9ihuSlsaBS6P--bIt7HI\";\n\n// Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.\nconst terrainProvider = new cesium__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\nconst viewer = new cesium__WEBPACK_IMPORTED_MODULE_7__[\"default\"](\"cesiumContainer\", {\n  performanceDisplay: false,\n  navigationHelpButton: false,\n  navigationInstructionsInitiallyVisible: false,\n  baseLayerPicker: false,\n  homeButton: false,\n  // infoBox: false,\n  sceneModePicker: false,\n  geocoder: false,\n  selectionIndicator: false,\n  scene3DOnly: true,\n  shouldAnimate: false,\n  imageryProvider: new cesium__WEBPACK_IMPORTED_MODULE_8__[\"default\"]({\n    url : 'https://a.tile.openstreetmap.org/',\n    maximumLevel: 17\n  }),\n  terrainProvider: terrainProvider,\n  fullscreenButton: false,\n});\n\nconst buildingsStyle = new cesium__WEBPACK_IMPORTED_MODULE_9__[\"default\"]({\n  color: {\n    conditions: [\n      [\"${feature['building']} === 'train_station'\", \"rgba(254,230,230, 0.5)\"],\n      [\"${feature['building']} === 'roof'\", \"rgba(254,230,230, 0.5)\"],\n      [\"${feature['building']} === 'viaduct'\", \"rgba(254,230,230, 0.5)\"],\n    ],\n  },\n});\n\nconst osmBuildings = (0,cesium__WEBPACK_IMPORTED_MODULE_10__[\"default\"])({\n  // Performance options\n  shadows: false,\n  maximumScreenSpaceError: 32,\n  cullRequestsWhileMoving: true,\n  //maximumMemoryUsage: 2,\n  //skipLevelOfDetail : true,\n  //dynamicScreenSpaceError: true,\n  // // baseScreenSpaceError : 1024,\n  // // skipScreenSpaceErrorFactor : 16,\n  // // skipLevels : 1,\n  // immediatelyLoadDesiredLevelOfDetail : true,\n  // loadSiblings : false,\n  // cullWithChildrenBounds : true,\n  //enableShowOutline: false,\n  // outlineColor: Color.WHITE,\n  // //color: Color.RED\n  // //backFaceCulling: false,\n  // // skipScreenSpaceErrorFactor: 5000,\n  // maximumScreenSpaceError: 64,\n  style: buildingsStyle,\n});\n\nviewer.scene.primitives.add(osmBuildings);\n// viewer.scene.debugShowFramesPerSecond = true;\nviewer.shadows = false;\nviewer.terrainShadows = false;\n\n// Add a directional light to the scene\nconst light = new cesium__WEBPACK_IMPORTED_MODULE_11__[\"default\"]({\n  direction: new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](-1.0, -1.0, -1.0),\n  color: cesium__WEBPACK_IMPORTED_MODULE_13__[\"default\"].WHITE,\n});\n\nviewer.scene.light = light;\n\n// The SampledPositionedProperty stores the position and timestamp for each sample along the radar sample series.\nconst positionProperty = [];\nlet start;\nlet stop;\nlet speed = 0.0694444; // 250km/s\nlet trainEntity;\nlet perspectiveCounter = 0;\n\nconst scene = viewer.scene;\nscene.screenSpaceCameraController.enableRotate = false;\nscene.screenSpaceCameraController.enableTranslate = false;\nscene.screenSpaceCameraController.enableZoom = false;\nscene.screenSpaceCameraController.enableTilt = false;\nscene.screenSpaceCameraController.enableLook = false;\n\nasync function loadAutocomplete() {\n  const response = await fetch(\"./data/autocomplete.json\");\n  const strecken = await response.json();\n\n  const input = document.getElementById(\"strecken\");\n  const streckeName = document.getElementById(\"strecke-name\");\n  const streckeTitle = document.getElementById(\"strecke-title\");\n\n  autocompleter__WEBPACK_IMPORTED_MODULE_2___default()({\n    input: input,\n    fetch: function (text, update) {\n      text = text.toLowerCase();\n      // you can also use AJAX requests instead of preloaded data\n      let suggestions = strecken.filter((n) => {\n        return n.label.toLowerCase().indexOf(text) !== -1;\n      });\n      update(suggestions);\n    },\n    onSelect: function (item) {\n      input.value = item.label;\n      loadData(item.value);\n      streckeName.innerHTML = item.label;\n      streckeTitle.style.visibility = \"visible\";\n      myModal.toggle();\n    },\n  });\n}\n\nasync function loadData(streckeId) {\n  const flightData = await fetch(`./data/${streckeId}.json`);\n  const flightDataJson = await flightData.json();\n  const coordinates = [];\n  const coordinatesH = [];\n  const coordinatesRaw = [];\n\n  flightDataJson[\"features\"].forEach((feature) => {\n    for (let i = 0; i < feature[\"geometry\"][\"coordinates\"][0].length - 1; i++) {\n      const coordinate = feature[\"geometry\"][\"coordinates\"][0][i];\n      coordinatesRaw.push([coordinate[0], coordinate[1]]);\n      coordinatesH.push(new cesium__WEBPACK_IMPORTED_MODULE_14__[\"default\"].fromDegrees(coordinate[0], coordinate[1]));\n      coordinates.push({ longitude: coordinate[0], latitude: coordinate[1], height: 0 });\n    }\n  });\n\n  await (0,cesium__WEBPACK_IMPORTED_MODULE_15__[\"default\"])(terrainProvider, coordinatesH);\n  const totalLine = (0,_turf_helpers__WEBPACK_IMPORTED_MODULE_4__.lineString)(coordinatesRaw);\n  const totalLength = (0,_turf_length__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(totalLine, { units: \"kilometers\" });\n  const totalSeconds = totalLength / speed;\n\n  start = new cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"].now();\n  stop = cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"].addSeconds(start, totalSeconds, new cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"]());\n\n  viewer.clock.startTime = start.clone();\n  viewer.clock.stopTime = stop.clone();\n  viewer.clock.currentTime = start.clone();\n  viewer.timeline.zoomTo(start, stop);\n  // Speed up the playback speed 50x.\n  viewer.clock.multiplier = 1;\n  // Start playing the scene.\n  viewer.clock.shouldAnimate = false;\n\n  let index = 0;\n  let flag = false;\n  let totalTime = 0;\n\n  for (let i = 0; i < coordinates.length; i++) {\n    // Declare the time for this individual sample and store it in a new JulianDate instance.\n    const position = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"].fromDegrees(coordinates[i].longitude, coordinates[i].latitude, coordinatesH[i].height);\n    if (i === 0) {\n      totalTime = 0;\n    } else if (i < coordinates.length - 1 && i !== 0) {\n      const line = (0,_turf_helpers__WEBPACK_IMPORTED_MODULE_4__.lineString)([coordinatesRaw[i - 1], coordinatesRaw[i]]);\n      const currentLength = (0,_turf_length__WEBPACK_IMPORTED_MODULE_3__[\"default\"])(line, { units: \"kilometers\" });\n      totalTime += currentLength / speed;\n    } else if (i === coordinates.length - 1) {\n      totalTime = totalSeconds;\n    }\n\n    const time = cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"].addSeconds(start, totalTime, new cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"]());\n    if (i % 10 === 0 && i !== 0) {\n      flag = true;\n      index++;\n    }\n\n    if (typeof positionProperty[index] === \"undefined\") {\n      positionProperty[index] = new cesium__WEBPACK_IMPORTED_MODULE_17__[\"default\"]();\n      positionProperty[index].addSample(time, position);\n    } else if (flag) {\n      positionProperty[index].addSample(time, position);\n      positionProperty[index - 1].addSample(time, position);\n      flag = false;\n    } else {\n      positionProperty[index].addSample(time, position);\n    }\n\n    viewer.entities.add({\n      description: `Location: (${coordinates[i].longitude}, ${coordinates[i].latitude}, ${coordinatesH[i].height})`,\n      position: position,\n      point: { pixelSize: 3, color: cesium__WEBPACK_IMPORTED_MODULE_13__[\"default\"].GREY },\n    });\n  }\n\n  const cameraView = {\n    destination: cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"].fromDegrees(coordinates[0].longitude, coordinates[0].latitude, 2000),\n    orientation: new cesium__WEBPACK_IMPORTED_MODULE_18__[\"default\"](positionProperty[0]),\n    duration: 5,\n    complete: () => {\n      loadModel().then(() => {\n        setTimeout(() => {\n          toggleAnimation();\n        }, 4000);\n      });\n    },\n  };\n\n  viewer.camera.flyTo(cameraView);\n}\n\nasync function loadModel() {\n  // Load the glTF model from Cesium ion.\n  const trainUri = \"./models/zugTest.glb\";\n  trainEntity = viewer.entities.add({\n    //availability: new TimeIntervalCollection([new TimeInterval({ start: start, stop: stop })]),\n    position: positionProperty[0],\n    // Attach the 3D model instead of the green point.\n    model: { uri: trainUri, scale: 0.025 },\n    // Automatically compute the orientation from the position.\n    orientation: new cesium__WEBPACK_IMPORTED_MODULE_18__[\"default\"](positionProperty[0]),\n    // path: new PathGraphics({ width: 5 }),\n    viewFrom: new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](200, 125, 100),\n    // viewFrom: new Cartesian3(100, 150, 200),\n    shadows: false,\n  });\n\n  viewer.trackedEntity = trainEntity;\n\n  let index = 0;\n  let latestTime = positionProperty[index]._property._times[positionProperty[index]._property._times.length - 1];\n  let latestPosition = positionProperty[index].getValue(latestTime);\n\n  viewer.clock.onTick.addEventListener(function (clock) {\n    if (clock.shouldAnimate) {\n      const shouldUpdatePosition = cesium__WEBPACK_IMPORTED_MODULE_16__[\"default\"].greaterThanOrEquals(clock.currentTime, latestTime);\n      if (shouldUpdatePosition && typeof positionProperty[index + 1] !== \"undefined\") {\n        index++;\n        trainEntity.position = positionProperty[index];\n        trainEntity.orientation = new cesium__WEBPACK_IMPORTED_MODULE_18__[\"default\"](positionProperty[index]);\n        latestTime = positionProperty[index]._property._times[positionProperty[index]._property._times.length - 1];\n      } else if (shouldUpdatePosition && typeof positionProperty[index + 1] === \"undefined\") {\n        latestPosition = positionProperty[index].getValue(latestTime);\n        trainEntity.position = latestPosition;\n        trainEntity.orientation = new cesium__WEBPACK_IMPORTED_MODULE_18__[\"default\"](positionProperty[index]);\n        viewer.clock.shouldAnimate = false;\n      }\n    }\n  });\n}\n\nloadAutocomplete();\n\nfunction toggleAnimation() {\n  viewer.clock.shouldAnimate = !viewer.clock.shouldAnimate;\n  playBtn.innerHTML = viewer.clock.shouldAnimate ? \"Stop\" : \"Play\";\n}\n\nconst myModal = new bootstrap.Modal(document.getElementById(\"myModal\"), {});\nmyModal.toggle();\n\nconst popularBtns = document.getElementsByClassName(\"popular-btn\");\nfor (let i = 0; i < popularBtns.length; i++) {\n  popularBtns[i].addEventListener(\"click\", function (e) {\n    const streckeName = document.getElementById(\"strecke-name\");\n    const streckeTitle = document.getElementById(\"strecke-title\");\n    streckeName.innerHTML = e.currentTarget.innerHTML;\n    streckeTitle.style.visibility = \"visible\";\n    loadData(e.currentTarget.dataset.id);\n  });\n}\n\nconst playBtn = document.getElementById(\"start-animation\");\nplayBtn.addEventListener(\"click\", () => {\n  toggleAnimation();\n});\n\nfunction updateView() {\n  const matrix3Scratch = new cesium__WEBPACK_IMPORTED_MODULE_19__[\"default\"]();\n  const positionScratch = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"]();\n  const orientationScratch = new cesium__WEBPACK_IMPORTED_MODULE_20__[\"default\"]();\n  const scratch = new cesium__WEBPACK_IMPORTED_MODULE_21__[\"default\"]();\n  const position = cesium__WEBPACK_IMPORTED_MODULE_22__[\"default\"].getValueOrUndefined(trainEntity.position, viewer.clock.currentTime, positionScratch);\n  let result;\n  let perspective;\n\n  switch(perspectiveCounter) {\n    case 0:\n      perspective = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](-50, 0, 10);\n      perspectiveCounter++;\n      break;\n    case 1:\n      perspective = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](50, 0, 100);\n      perspectiveCounter++;\n      break;\n    case 2:\n      perspective = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](150, -100, 50);\n      perspectiveCounter++;\n      break\n    case 3:\n        perspective = new cesium__WEBPACK_IMPORTED_MODULE_12__[\"default\"](50, 0, 10);\n        perspectiveCounter = 0;\n        break\n    default:\n      break;\n  }\n\n  if (!(0,cesium__WEBPACK_IMPORTED_MODULE_23__[\"default\"])(position)) {\n    return undefined;\n  }\n\n  var orientation = cesium__WEBPACK_IMPORTED_MODULE_22__[\"default\"].getValueOrUndefined(trainEntity.orientation, viewer.clock.currentTime, orientationScratch);\n  if (!(0,cesium__WEBPACK_IMPORTED_MODULE_23__[\"default\"])(orientation)) {\n    result = cesium__WEBPACK_IMPORTED_MODULE_24__[\"default\"].eastNorthUpToFixedFrame(position, undefined, scratch);\n  } else {\n    result = cesium__WEBPACK_IMPORTED_MODULE_21__[\"default\"].fromRotationTranslation(cesium__WEBPACK_IMPORTED_MODULE_19__[\"default\"].fromQuaternion(orientation, matrix3Scratch), position, result);\n  }\n  viewer.scene.camera.lookAtTransform(result, perspective);\n}\n\nconst changePerspectiveBtn = document.getElementById(\"change-perspective\");\nchangePerspectiveBtn.addEventListener(\"click\", () => {\n  updateView();\n});\n\nconst restartBtn = document.getElementById(\"restart-animation\");\nrestartBtn.addEventListener(\"click\", () => {\n  location.reload();\n});\n\nconst speedText = document.querySelector(\"#speed-text\");\nconst speedInput = document.querySelector(\"#speed\");\nspeedText.innerHTML = speedInput.value;\nspeedInput.addEventListener(\"input\", (event) => {\n  speedText.innerHTML = event.target.value;\n  speed = event.target.value / 3600;\n});\n\n\n//# sourceURL=webpack://cesiumjs-webpack-example/./src/index.js?");

/***/ })

},
/******/ function(__webpack_require__) { // webpackRuntimeModules
/******/ /* webpack/runtime/getFullHash */
/******/ (() => {
/******/ 	__webpack_require__.h = () => ("bb9d56e8be4887dd195a")
/******/ })();
/******/ 
/******/ }
);